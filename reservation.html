<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Yangtse - Über uns </title>
    <link rel="icon" href="img/favicon.png" />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <!-- animate CSS -->
    <link rel="stylesheet" href="css/animate.css" />
    <!-- owl carousel CSS -->
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <!-- themify CSS -->
    <link rel="stylesheet" href="css/themify-icons.css" />
    <!-- flaticon CSS -->
    <link rel="stylesheet" href="css/flaticon.css" />
    <!-- font awesome CSS -->
    <link rel="stylesheet" href="css/magnific-popup.css" />
    <!-- swiper CSS -->
    <link rel="stylesheet" href="css/slick.css" />
    <link rel="stylesheet" href="css/gijgo.min.css" />
    <link rel="stylesheet" href="css/nice-select.css" />
    <link rel="stylesheet" href="css/all.css" />
    <!-- style CSS -->
    <link rel="stylesheet" href="css/style.css" />
    <style>
        uebschriftGross {  }
    </style>
</head>

<body>
<!--::header part start::-->
<header class="main_menu home_menu">
    <div class="container" >
        <div class="row align-items-center">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light">
                    <a class="navbar-brand" href="index.html">
                        <img class="logo"src="img/Yangtse_logo_mitKontur_s.png"  alt="logo" />
                    </a>
                    <button
                            class="navbar-toggler"
                            type="button"
                            data-toggle="collapse"
                            data-target="#navbarSupportedContent"
                            aria-controls="navbarSupportedContent"
                            aria-expanded="false"
                            aria-label="Toggle navigation"
                    >
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div
                            class="collapse navbar-collapse main-menu-item justify-content-end"
                            id="navbarSupportedContent"
                    >
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="buffet.html">Buffet</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="reservation.html">Reservieren</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" style="color: #0b0b0b" href="about.html">Über uns</a>
                            </li>
                            <!-- <li class="nav-item dropdown">
                               <a
                                       class="nav-link dropdown-toggle"
                                       href="blog.html"
                                       id="navbarDropdown"
                                       role="button"
                                       data-toggle="dropdown"
                                       aria-haspopup="true"
                                       aria-expanded="false"
                               >
                                 Blog
                               </a>
                               <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                 <a class="dropdown-item" href="blog.html">Blog</a>
                                 <a class="dropdown-item" href="single-blog.html"
                                 >Single blog</a
                                 >
                               </div>
                             </li>-->
                            <!--              <li class="nav-item dropdown">
                                            <a
                                                    class="nav-link dropdown-toggle"
                                                    href="blog.html"
                                                    id="navbarDropdown_1"
                                                    role="button"
                                                    data-toggle="dropdown"
                                                    aria-haspopup="true"
                                                    aria-expanded="false"
                                            >
                                              pages
                                            </a>
                                            <div class="dropdown-menu" aria-labelledby="navbarDropdown_1">
                                              <a class="dropdown-item" href="elements.html">Elements</a>
                                            </div>
                                          </li>-->
                            <li class="nav-item">
                                <a class="nav-link" href="corona.html">Corona</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link">Öffnungszeiten und Kontakt</a>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>
<!-- Header part end-->

<!-- breadcrumb start-->
<section class="breadcrumb breadcrumb_bg">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb_iner">
                    <div class="breadcrumb_iner_item">
                        <p>Online Reservierung</p>
                        <span style="font-size: xxx-large;color: white; font-weight: bolder;">Yangtse Online Reservierung</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- breadcrumb start-->

<!-- about part start-->
<section class="about_part single_about_page padding_bottom" style="padding-bottom: 5%" id="reservationForm">
    <div class="container">

        <div class="col-lg-12">
            <span class="ueberschrift">Einen Tisch reservieren</span>
            <div class="about_part_iner" style="margin-top: 70px">
                <div class="row align-items-center">
                    <div class="col-lg-5">
                        <div class="about_text">
                            <h5 style="margin-top: 3%">Reservierung Informationen</h5>
                            <form>
                                <p style="font-weight: bolder; margin-top: 5%">Vorname</p>
                                <input type="text" placeholder="Max" id="firstName" onclick="makeReservationVisible()">
                                <p style="font-weight: bolder; margin-top: 5%">Nachname</p>
                                <input type="text" placeholder="Mustermann" id="lastName" onclick="makeReservationVisible()">
                                <p style="font-weight: bolder; margin-top: 5%">Anzahl der Kinder unter 12 Jahren</p>
                                <input type="number" min="0" placeholder="0" id="numberOfKids" onclick="makeReservationVisible()">
                                <p style="font-weight: bolder; margin-top: 5%">Anzahl der Erwachsenen</p>
                                <input type="number" min="0" placeholder="0" id="numberOfPeople" onclick="makeReservationVisible()">
                            </form>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <form>
                            <p style="font-weight: bolder; margin-top: 6%">E-Mail</p>
                            <input type="text" placeholder="Max@mail.de" id="eMail" onclick="makeReservationVisible()">
                            <p style="font-weight: bolder; margin-top: 5%">Datum und Uhrzeit</p>
                            <input type="datetime-local" placeholder="Bitte wählen Sie das Datum und die Uhrzeit aus" id="dateTimeReservation" onclick="makeReservationVisible()">
                            <p style="font-weight: bolder; margin-top: 5%">Telefonnummer</p>
                            <input type="text" placeholder="02381168168", id="phoneNumber" onclick="makeReservationVisible()">
                            <p style="font-weight: bolder; margin-top: 5%">Anmerkung zur Reservierung</p>
                            <input type="text" placeholder="Bitte am Fenster" style="height: 70px" id="commentFromUser" onclick="makeReservationVisible()">
                        </form>
                    </div>
                </div>
                <div class="row align-items-center">
                    <form class="mx-auto">
                        <p style="font-weight: bolder; margin-top: 6%"> <input type="checkbox" id="agbCheck" onclick="makeReservationVisible()"> Ich stimme den AGB und dem Datenschutz zu</p>
                        <p style="font-weight: bolder; margin-top: 1%"> <input type="checkbox"> Ich möchte kostenlose Yangtse Gutscheine per E-Mail erhalten </p>
                    </form>
                </div>
                <div class="row align-items-center">
                    <button class="btn_1 mx-auto" style="color: white; display: none" onclick="makeReservation()" id="reservationButton">
                        Reservieren
                    </button>
                </div>
                <div class="row align-items-center">
                    <button class="mx-auto loader" style="color: red; display: none"  id="loading">
                        Einen Moment
                    </button>
                </div>

                <div class="row align-items-center">
                    <p class="mx-auto" style="color: red; display: none; font-weight: bolder"  id="reservationComplete">
                        Ihre Reservierung war ein Erfolg!
                    </p>
                </div>

            </div>
        </div>
    </div>
</section>
<!-- about part end-->

<section class="about_part single_about_page padding_bottom" style="margin-top: 5%; display: none" id="success">
    <div class="container">
        <div class="row align-items-center justify-content-center">
            <div class="col-lg-12">
                <div class="about_part_iner">
                    <div class="row align-items-center">
                        <div class="col-lg-7 mx-auto" style="margin-top: 3%">

                            <p style="font-weight: bolder">Ihre Reservierung war erfolgreich.
                                Sie werde in Kürze eine E-Mail bekommen mit einem QR-Code. Zeigen Sie den QR-Code am Eingang. </p>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<!--::contact part css start::-->
<section class="contact_part section_padding" style="background-image: url(img/19_Yangste.jpg.jpg)">
    <div class="container">
        <div class="row">
            <div class="col-lg-6">
                <div class="contact_part_iner">
                    <h3>So finden Sie uns</h3>
                    <div class="single_contact_part">
                        <h5>Anschrift</h5>
                        <p>Fachmarktzentrum Hürth Eschweiler Straße 2 50354 Hürth</p>
                    </div>
                    <div class="single_contact_part">
                        <h5>Öffnungszeiten</h5>
                        <p>Mi - Fr von 12.00 - 15.00 Uhr</p>
                        <p>Mo - Fr von 18.00 - 22.30 Uhr</p>
                        <p>Sa 12.00 - 23.00 Uhr</p>
                        <p>So 12.00 -22.00 Uhr</p>
                    </div>

                </div>
            </div>
        </div>
    </div>
</section>
<!--::contact part css end::-->

<!-- footer part start-->
<footer class="footer-area">
    <div class="container">
        <div class="row justify-content-between">
            <div class="col-xl-3 col-sm-6 col-md-3 col-lg-3">
                <div class="single-footer-widget footer_1">
                    <img src="img/logo.png" alt="#" />
                    <p>+880 253 356 263</p>
                    <span>burires@contact.com</span>
                    <div class="social_icon">
                        <a href="#" class="single_social_icon"
                        ><i class="fab fa-facebook-square"></i
                        ></a>
                        <a href="#" class="single_social_icon"
                        ><i class="fab fa-instagram"></i
                        ></a>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 col-md-2 col-lg-3">
                <div class="single-footer-widget footer_2">
                    <h4>Quick links</h4>
                    <div class="contact_info">
                        <ul>
                            <li><a href="#">About</a></li>
                            <li><a href="#"> Menu</a></li>
                            <li><a href="#">Reservation</a></li>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#"> Breakfast</a></li>
                            <li><a href="#">Lunch</a></li>
                            <li><a href="#">Dinner</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-sm-6 col-md-4 col-lg-3">
                <div class="single-footer-widget footer_3">
                    <h4>Subscribe newsletter</h4>
                    <form action="#">
                        <div class="form-group">
                            <div class="input-group mb-3">
                                <input
                                        type="text"
                                        class="form-control"
                                        placeholder="Email Address"
                                        onfocus="this.placeholder = ''"
                                        onblur="this.placeholder = 'Email Address'"
                                />
                                <div class="input-group-append">
                                    <button class="btn" type="button">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                    <p>
                        Subscribe newsletter to get all updates about discount and
                        offers.
                    </p>
                </div>
            </div>
        </div>
        <div class="copyright_part_text">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <p class="footer-text m-0">
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                        Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="ti-heart" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
                        <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    </p>
                </div>
            </div>
        </div>
    </div>
</footer>




<!-- footer part end-->

<!-- jquery plugins here-->
<!-- jquery -->
<script src="js/jquery-1.12.1.min.js"></script>
<!-- popper js -->
<script src="js/popper.min.js"></script>
<!-- bootstrap js -->
<script src="js/bootstrap.min.js"></script>
<!-- easing js -->
<script src="js/jquery.magnific-popup.js"></script>
<!-- swiper js -->
<script src="js/swiper.min.js"></script>
<!-- swiper js -->
<script src="js/masonry.pkgd.js"></script>
<!-- particles js -->
<script src="js/owl.carousel.min.js"></script>
<!-- swiper js -->
<script src="js/slick.min.js"></script>
<script src="js/gijgo.min.js"></script>
<script src="js/jquery.nice-select.min.js"></script>
<!-- custom js -->
<script src="js/custom.js"></script>

<script>
    const BASE_URL = "http://localhost:8080"
    window.addEventListener('load', () => {
        const now = new Date();
        now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
        now.setMonth(now.getMonth()+1)
        //console.log(now.toISOString())
        if(now.getMonth() < 10)
            today = now.getFullYear()+'-0'+now.getMonth()+'-'+now.getDate()+'T'+'08:50';
        else
            today = now.getFullYear()+'-'+now.getMonth()+'-'+now.getDate()+'T'+'08:50';
        console.log(today.valueOf())
        document.getElementById('dateTimeReservation').value = today
    });


    class Reservation {
        constructor(email,reservationDate, numberOfPeople, numberOfKids,  timestamp, phoneNumber, commentFromGuestUser, firstName, lastName) {
            this.id = 0;
            this.guestUserID = email;
            this.reservationDate = reservationDate;
            this.numberOfPeople = numberOfPeople;
            this.numberOfKids = numberOfKids;
            this.haveArrived = false
            this.timestamp = timestamp;
            this.phoneNumber = phoneNumber;
            this.commentFromGuestUser = commentFromGuestUser;
            this.firstName = firstName;
            this.lastName = lastName;
        }


    }



    //POST HTTP on Backend
    function makeReservation()
    {
        loading(true);
        let url = BASE_URL+"/api/ReservationService/noAuth/"+document.getElementById("agbCheck").checked;
        console.log(url);
        let xhr = new XMLHttpRequest();
        xhr.open("POST", url);

        xhr.setRequestHeader("Accept", "application/json");
        xhr.setRequestHeader("Content-Type", "application/json");

        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                console.log(xhr.responseText);
                var reservation = JSON.parse(xhr.responseText);
                console.log(reservation)
                if (reservation.id != -1) {
                    loading(false);
                    makeSuccessVisible()

                }
            }
        };

        const id = 0;
        const guestUserID = document.getElementById("eMail").value;
        let reservationDate = document.getElementById("dateTimeReservation").value;
        let numberOfPeople = document.getElementById("numberOfPeople").value;
        let numberOfKids = document.getElementById("numberOfKids").value;
        const haveArrived = false;
        const timestamp = "";
        let phoneNumber = document.getElementById("phoneNumber").value;
        let commentFromGuestUser = document.getElementById("commentFromUser").value;
        let firstName = document.getElementById("firstName").value;
        let lastName = document.getElementById("lastName").value;
        let reservation = new Reservation(guestUserID, reservationDate, numberOfPeople, numberOfKids,
            timestamp, phoneNumber, commentFromGuestUser, firstName, lastName);
        let reservationJSON = JSON.stringify(reservation);
        xhr.send(reservationJSON);


    }

    function loading(boolean){
        if(boolean){
            document.getElementById("loading").style.display = 'block'
            document.getElementById("reservationButton").style.display = 'none';
        }else{
            document.getElementById("loading").style.display = 'none'
        }

    }

    function makeReservationVisible() {
        console.log("ACTIVATE")
        var reservationButton = document.getElementById("reservationButton");
        console.log(checkIfInputFilled())
        if (checkIfInputFilled()) {
            reservationButton.style.display = 'block';
            reservationButton.style.marginTop = '4%'
            reservationButton.classList.add('btn_1','mx-auto');
        }else {
            reservationButtonSettings = 'none';
        }

    }

    function makeSuccessVisible(){
        document.getElementById("reservationForm").style.display = 'none'
        document.getElementById("reservationComplete").style.display = 'block'
        document.getElementById("success").style.display = 'block';

    }

    function checkIfInputFilled(){
        var numberOfFilledInputBox = 0;
        if(document.getElementById("eMail").value !== "")
            numberOfFilledInputBox++;
        if(document.getElementById("numberOfPeople").value !== "")
            numberOfFilledInputBox++;
        if(document.getElementById("numberOfKids").value !== "")
            numberOfFilledInputBox++;
        if(document.getElementById("phoneNumber").value !== "")
            numberOfFilledInputBox++;
        /*        console.log("Checkbox coming")
                console.log(document.getElementById("agbCheck").checked);*/
        return numberOfFilledInputBox >= 3 && document.getElementById("agbCheck").checked;

    }
    function isGuestUser(){

        var email = document.getElementById("eMail").value;
        if(email == "")
            return false;
        else{
            var restURL = BASE_URL+""
        }
    }
</script>

</body>
</html>
